[trainImgs, trainLabels]=sn.getTestImage();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
currentClasses = unique(cell2mat(values(currentHashTable,keys(currentHashTable))));
%precision_train=zeros(1,length(currentClasses));
precision_svm = zeros(3,length(currentClasses));

%testImgs_svm = (testImgs_svm-0.5)*2;
%%
%data=zscore([trainImgs;testImgs]);
%trainImgs_svm = zscore(trainImgs); %data(1:size(trainImgs),:);
%testImgs_svm = zscore(testImgs);%data(size(trainImgs)+1:end,:);
%%
model = libsvmtrain(cell2mat(values(currentHashTable, trainLabels)), trainImgs, '-g 0.07 -t 0 -c 1');
for i=1:length(currentClasses)
    currentTestIdx = find(cell2mat(values(currentHashTable,testLabels))==currentClasses(i));
    [predict_label, precision_svm(:,i), dec_values] = ...
        libsvmpredict(cell2mat(values(currentHashTable,testLabels(currentTestIdx))), testImgs(currentTestIdx,:), model);
end
precision_svm_train=zeros(3,length(currentClasses));
for i=1:length(currentClasses)
    currentTestIdx = find(cell2mat(values(currentHashTable,trainLabels))==currentClasses(i));
    [predict_label, precision_svm_train(:,i), dec_values] = ...
        libsvmpredict(cell2mat(values(currentHashTable,trainLabels(currentTestIdx))), trainImgs(currentTestIdx,:), model);
end